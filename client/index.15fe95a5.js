import{S as e,i as a,s,e as t,t as r,c as n,a as o,b as i,d as l,f as c,g as d,h as u,j as h,k as f,l as p,m,n as g,o as $,p as v,q as w,r as P,u as I,v as j,w as x}from"./client.2f94a70a.js";import{s as y,B as E}from"./Block.a09a7fee.js";import"./v4.96b22442.js";import"./index.4309d992.js";function b(e){let a,s,h;return{c(){a=t("a"),s=r("Edit this page"),this.h()},l(e){a=n(e,"A",{class:!0,href:!0});var t=o(a);s=i(t,"Edit this page"),t.forEach(l),this.h()},h(){c(a,"class","edit-btn svelte-106zl87"),c(a,"href",h=`/${e[1]}/${e[2]}/edit`)},m(e,t){d(e,a,t),u(a,s)},p(e,s){6&s&&h!==(h=`/${e[1]}/${e[2]}/edit`)&&c(a,"href",h)},d(e){e&&l(a)}}}function k(e){let a,s,r,i,I;r=new E({});let j=e[1]===e[0]&&b(e);return{c(){a=t("main"),s=t("div"),h(r.$$.fragment),i=f(),j&&j.c(),this.h()},l(e){a=n(e,"MAIN",{class:!0});var t=o(a);s=n(t,"DIV",{class:!0});var c=o(s);p(r.$$.fragment,c),c.forEach(l),i=m(t),j&&j.l(t),t.forEach(l),this.h()},h(){c(s,"class","block svelte-106zl87"),c(a,"class","svelte-106zl87"),g(a,"hidden",e[3])},m(e,t){d(e,a,t),u(a,s),$(r,s,null),u(a,i),j&&j.m(a,null),I=!0},p(e,[s]){e[1]===e[0]?j?j.p(e,s):(j=b(e),j.c(),j.m(a,null)):j&&(j.d(1),j=null),8&s&&g(a,"hidden",e[3])},i(e){I||(v(r.$$.fragment,e),I=!0)},o(e){w(r.$$.fragment,e),I=!1},d(e){e&&l(a),P(r),j&&j.d()}}}var z=function(e,a,s,t){return new(s||(s=Promise))((function(r,n){function o(e){try{l(t.next(e))}catch(e){n(e)}}function i(e){try{l(t.throw(e))}catch(e){n(e)}}function l(e){var a;e.done?r(e.value):(a=e.value,a instanceof s?a:new s((function(e){e(a)}))).then(o,i)}l((t=t.apply(e,a||[])).next())}))};function B(e,a){return z(this,void 0,void 0,(function*(){try{const{username:s,pageId:t}=e.params,r=`api/${s}/${t}.json`,n=yield this.fetch(r),o=yield n.json();return o||this.error(404,"Page does not exist"),o.pageProps.editingLayout=!1,o.pageProps.focusedBlock="",y.set(o),{storePreloaded:o,pageId:t,owner:s,create:!1,username:a.username}}catch(e){this.error(500,e)}}))}function A(e,a,s){let t;I(e,y,e=>s(5,t=e));let{storePreloaded:r}=a,{owner:n}=a,{username:o}=a,{pageId:i}=a,l=!0;return r&&j(y,t=r,t),x(()=>s(3,l=!1)),e.$$set=e=>{"storePreloaded"in e&&s(4,r=e.storePreloaded),"owner"in e&&s(0,n=e.owner),"username"in e&&s(1,o=e.username),"pageId"in e&&s(2,i=e.pageId)},[n,o,i,l,r]}export default class extends e{constructor(e){super(),a(this,e,A,k,s,{storePreloaded:4,owner:0,username:1,pageId:2})}}export{B as preload};

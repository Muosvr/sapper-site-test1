import{S as e,i as t,s,e as a,t as r,c as n,a as o,b as i,d as l,f as c,g as u,h as p,G as d,k as f,m as h,L as v,y as m,A as g,J as b}from"./client.2f94a70a.js";import{a as y,r as w}from"./index.4309d992.js";function q(e){let t,s;return{c(){t=a("p"),s=r(e[3]),this.h()},l(a){t=n(a,"P",{class:!0});var r=o(t);s=i(r,e[3]),r.forEach(l),this.h()},h(){c(t,"class","error svelte-1l1q8ob")},m(e,a){u(e,t,a),p(t,s)},p(e,t){8&t&&d(s,e[3])},d(e){e&&l(t)}}}function x(e){let t,s,d,y,w,x,E,T,L,P,I,U,N,S,$,A,B,D,R,j,O,V,k,z=e[4].h1+"",F=e[4].buttonText+"",G=e[3]&&q(e);return{c(){t=a("div"),s=a("div"),d=a("h1"),y=r(z),w=f(),G&&G.c(),x=f(),E=a("form"),T=a("label"),L=r("Username"),P=f(),I=a("input"),U=f(),N=a("label"),S=r("Password"),$=f(),A=a("input"),B=f(),D=a("input"),R=f(),j=a("button"),O=r(F),this.h()},l(e){t=n(e,"DIV",{class:!0});var a=o(t);s=n(a,"DIV",{class:!0});var r=o(s);d=n(r,"H1",{class:!0});var c=o(d);y=i(c,z),c.forEach(l),w=h(r),G&&G.l(r),x=h(r),E=n(r,"FORM",{class:!0});var u=o(E);T=n(u,"LABEL",{for:!0});var p=o(T);L=i(p,"Username"),p.forEach(l),P=h(u),I=n(u,"INPUT",{id:!0,type:!0,required:!0}),U=h(u),N=n(u,"LABEL",{for:!0});var f=o(N);S=i(f,"Password"),f.forEach(l),$=h(u),A=n(u,"INPUT",{id:!0,type:!0,required:!0}),B=h(u),D=n(u,"INPUT",{hidden:!0,value:!0}),R=h(u),j=n(u,"BUTTON",{class:!0});var v=o(j);O=i(v,F),v.forEach(l),u.forEach(l),r.forEach(l),a.forEach(l),this.h()},h(){c(d,"class","svelte-1l1q8ob"),c(T,"for","username-input"),c(I,"id","username-input"),c(I,"type","text"),I.required=!0,c(N,"for","password-input-1"),c(A,"id","password-input-1"),c(A,"type","password"),A.required=!0,D.hidden=!0,D.value=e[0],c(j,"class","capitalize svelte-1l1q8ob"),c(E,"class","svelte-1l1q8ob"),c(s,"class","panel svelte-1l1q8ob"),c(t,"class","input-container svelte-1l1q8ob")},m(a,r){u(a,t,r),p(t,s),p(s,d),p(d,y),p(s,w),G&&G.m(s,null),p(s,x),p(s,E),p(E,T),p(T,L),p(E,P),p(E,I),v(I,e[1]),p(E,U),p(E,N),p(N,S),p(E,$),p(E,A),v(A,e[2]),p(E,B),p(E,D),p(E,R),p(E,j),p(j,O),V||(k=[m(I,"input",e[7]),m(A,"input",e[8]),m(E,"submit",e[5])],V=!0)},p(e,[t]){e[3]?G?G.p(e,t):(G=q(e),G.c(),G.m(s,x)):G&&(G.d(1),G=null),2&t&&I.value!==e[1]&&v(I,e[1]),4&t&&A.value!==e[2]&&v(A,e[2]),1&t&&D.value!==e[0]&&(D.value=e[0])},i:g,o:g,d(e){e&&l(t),G&&G.d(),V=!1,b(k)}}}var E=function(e,t,s,a){return new(s||(s=Promise))((function(r,n){function o(e){try{l(a.next(e))}catch(e){n(e)}}function i(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};function T(e,t){return E(this,void 0,void 0,(function*(){let s=e.params.type;console.log("type",s),console.log("['login', 'register'].includes(type)",["login","register"].includes(s)),["login","register"].includes(s)||this.error(404,"Not found");const{user:a,csrf:r}=t||{};return a?this.redirect(302,"/"):{csrf:r,type:s}}))}function L(e,t,s){let{csrf:a}=t,{type:r}=t;const n={login:{h1:"Log In",buttonText:"Login",handleSubmit:y},register:{h1:"Register for an account",buttonText:"Register",handleSubmit:w}}[r];let o,i,l;return e.$$set=e=>{"csrf"in e&&s(0,a=e.csrf),"type"in e&&s(6,r=e.type)},[a,o,i,l,n,e=>{e.preventDefault(),n.handleSubmit({username:o,password:i}).then(e=>{console.log("redirecting to ",`/${o}/pages`),window.location.assign(`/${o}/pages`)}).catch(e=>s(3,l=e.response.data.error))},r,function(){o=this.value,s(1,o)},function(){i=this.value,s(2,i)}]}export default class extends e{constructor(e){super(),t(this,e,L,x,s,{csrf:0,type:6})}}export{T as preload};
